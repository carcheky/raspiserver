# This cron job runs every hour
# It echoes the current date and time along with the message "docker updated" to the log file /var/log/raspiserver.log
# Then it changes the current directory to /home/carcheky/raspiserver
# Finally, it runs the command "docker compose up -d --pull always --scale jellyfin=2 --scale homeassistant=2" to start the docker containers

current_date=$(sudo date -s "$(wget -qSO- --max-redirect=0 google.com 2>&1 | grep Date: | cut -d' ' -f5-8)Z")

4 4 * * * root sudo echo "$current_date: dockered" &>> /var/log/raspiserver.log && cd /home/carcheky/raspiserver && (docker-compose up -d --pull always &>> /var/log/raspiserver.log)
@reboot root sudo echo "$current_date: dockered" &>> /var/log/raspiserver.log && cd /home/carcheky/raspiserver && (docker-compose up -d --pull always &>> /var/log/raspiserver.log)

# This cron job runs every day
# It echoes the current date and time along with the message "rebooted" to the log file /var/log/raspiserver.log
# Then it reboots the system

5 5 * * * root sudo echo "$current_date: rebooted" &>> /var/log/raspiserver.log && sudo reboot

# This cron job runs at system reboot
# It echoes the current date and time along with the message "date updated" to the log file /var/log/raspiserver.log
# Then it sets the system date and time to the date and time obtained from google.com

*/30 * * * * root sudo echo "$current_date: datered " &>> /var/log/raspiserver.log &&  sudo date -s "$(wget -qSO- --max-redirect=0 google.com 2>&1 | grep Date: | cut -d' ' -f5-8)Z"
@reboot root sudo echo "$current_date: datered " &>> /var/log/raspiserver.log &&  sudo date -s "$(wget -qSO- --max-redirect=0 google.com 2>&1 | grep Date: | cut -d' ' -f5-8)Z"
